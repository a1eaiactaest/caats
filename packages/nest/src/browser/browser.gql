scalar DateTime
scalar PositiveInt

input ScheduleInput {
  since: DateTime
  until: DateTime
  skip: PositiveInt
  take: PositiveInt
}

input ScheduleTargets {
  groups: [String!]
  hosts: [String!]
}

"Represents a time range."
input SinceUntil {
  since: DateTime
  until: DateTime
}

"Represents a skip and take. Useful for pagination."
input SkipTake {
  "The number of items to skip."
  skip: PositiveInt
  "The number of items to take."
  take: PositiveInt
}

input GroupInput {
  groups: [String!]!
}

input HostInput {
  host: String!
}

type Scraper {
  id: ID!
  alias: String!
  state: String!
  lastSeen: DateTime
}

type StoredTask {
  id: ID!
  createdAt: DateTime!
  finishedAt: DateTime
  initialHash: String
  finalHash: String
  status: String!
  scraper: Scraper
}

type EventSource {
  id: ID!
  constantId: String!
  object: JSON!
  createdAt: DateTime!
  task: StoredTask!
}

"Represents a schedule event."
type ScheduleEvent {
  id: ID!
  startsAt: DateTime!
  endsAt: DateTime!
  "The full name of the subject."
  subject: String!
  "The short code of the subject."
  code: String!
  "The type of the event."
  type: String!
  "The room where the event is taking place."
  room: String
  "Hosts that are attending this event."
  hosts: [String!]!
  "Groups that are attending this event."
  groups: [String!]!
  "The source of the event."
  source: EventSource!
}

type User {
  events(search: ScheduleInput): [ScheduleEvent!]!
  nextEvent: ScheduleEvent
  currentEvent: ScheduleEvent
  scrapers: [Scraper!]!
}

type Query {
  events(search: ScheduleInput, targets: ScheduleTargets): [ScheduleEvent!]!
  event(id: Int!): ScheduleEvent
  scrapers: [Scraper!]!
  tasks: [StoredTask!]!
  sources: [EventSource!]!
  groups: [String!]!

  getGroups: [String!] @deprecated

  autocompleteGroups(query: String!): [String!] @deprecated

  findByDescription(query: String!): [ScheduleEvent!]! @deprecated
}
